import { Debugger } from 'debug';
/**
 * Options to create a sonos music api client.
 *
 * @param {string} name Name of music service, display only
 * @param {string} url SOAP endpoint of music service
 * @param {number} serviceId The ID of the service, take from the sonos internal list.
 * @param {string} auth Authentication requirements, take from the sonos internal list. Authentication logic depends on it.
 * @param {string} deviceId DeviceID is used from authentication, take from SystemPropertiesService.GetString 'R_TrialZPSerial'
 * @param {string} timezone Timezone is send to remote service, used for contextual things? Defaults to '+01:00'
 * @param {string} householdId HouseholdId is used from authentication, take from DevicePropertiesService.GetHouseholdID().CurrentHouseholdID
 * @param {string} key private key is used for authentication (not sure how to fetch this from sonos)
 * @param {string} authToken authToken is used for authentication (not sure how to fetch from sonos)
 *
 * @export
 * @interface SmapiClientOptions
 */
export interface SmapiClientOptions {
    name: string;
    url: string;
    serviceId: number;
    auth: 'Anonymous' | 'AppLink' | 'DeviceLink' | 'UserId';
    deviceId?: string;
    timezone?: string;
    householdId?: string;
    key?: string;
    authToken?: string;
    saveNewAccount?: SaveNemAccountHandler;
}
declare type SaveNemAccountHandler = (serviceId: number, key: string, token: string) => Promise<void>;
export interface MediaList {
    index: number;
    count: number;
    total: number;
    mediaMetadata?: MediaMetadata[];
    mediaCollection?: MediaItem[];
}
export interface Media {
    id: string;
    itemType: string;
    title: string;
}
export interface MediaMetadata extends Media {
    summary?: string;
    trackUri?: string;
}
export interface MediaItem extends Media {
    albumArtURI: string;
    canEnumerate: boolean;
    canPlay: boolean;
    displayType: string;
}
export interface DeviceLink {
    regUrl: string;
    linkCode: string;
    showLinkCode: boolean;
}
export interface AppLinkResponse {
    authorizeAccount?: {
        appUrlStringId: string;
        deviceLink: DeviceLink;
    };
    createAccount?: {
        appUrlStringId: string;
    };
}
export interface DeviceAuthResponse {
    authToken: string;
    privateKey: string;
    userInfo?: {
        accountTier?: 'paidPremium' | string;
        nickname?: string;
        userIdHashCode?: string;
    };
}
export declare enum SmapiClientErrors {
    TokenRefreshRequiredError = "tokenRefreshRequired"
}
/**
 * Sonos mucis service client, use GetMetadata as a starting point.
 *
 * @export
 * @remarks You shouldn't initialize yourself, take the one from sonos.MusicServicesClient('serviceName') because you'll need a lot of data know by sonos only.
 * @class SmapiClient
 */
export declare class SmapiClient {
    private readonly options;
    private debugger?;
    private key?;
    private authToken?;
    protected get debug(): Debugger;
    constructor(options: SmapiClientOptions);
    GetLoginLink(): Promise<DeviceLink>;
    /**
     * Get the AppLink for this music service, to connect it to your sonos system.
     * Only for services with Auth == 'AppLink'
     *
     * @returns {Promise<AppLinkResponse>}
     * @memberof SmapiClient
     */
    GetAppLink(): Promise<AppLinkResponse>;
    /**
     * Get credentials for the remote service, you'll need the linkcode from GetAppLink
     *
     * @param {string} linkCode
     * @returns
     * @memberof SmapiClient
     */
    GetDeviceAuthToken(linkCode: string): Promise<DeviceAuthResponse>;
    GetDeviceLinkCode(): Promise<DeviceLink>;
    /**
     * This is the main entrypoint for the external Music service.
     * You can browse lists, sometimes referring to other lists.
     *
     * @param {string} input.id The ID where you want the media info for. 'root' for the initial list.
     * @param {number} input.index Where you want to start in the list, 0 is a good start.
     * @param {number} input.count How many items you want, use something sensible like 10.
     * @param {boolean?} input.recursive optional, If true, the music service should return a flat collection of track metadata.
     * @returns {Promise<any>}
     * @memberof SmapiClient
     */
    GetMetadata(input: {
        id: string;
        index: number;
        count: number;
        recursive: boolean;
    }): Promise<MediaList>;
    GetExtendedMetadata(input: {
        id: string;
    }): Promise<MediaList>;
    GetMediaMetadata(input: {
        id: string;
    }): Promise<any>;
    GetMediaUri(input: {
        id: string;
    }): Promise<any>;
    Search(input: {
        id: string;
        term: string;
        index: number;
        count: number;
    }): Promise<MediaList>;
    private PostProcessMediaResult;
    private SoapRequest;
    private SoapRequestWithBody;
    private handleRequestAndParseResponse;
    private messageAction;
    private generateRequest;
    private generateRequestBody;
    private generateSoapBody;
    private getHouseholdIdOrThrow;
    private generateCredentialHeader;
    private generateContextHeader;
    private generateSoapHeader;
    private generateSoapEnvelope;
}
export {};
//# sourceMappingURL=smapi-client.d.ts.map